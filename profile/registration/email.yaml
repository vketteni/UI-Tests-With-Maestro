appId: com.kptncook.app.kptncook
env:
    FIRSTNAME: jesus
    LASTNAME: economy
    EMAIL: vincent+testui@kptncook.com
    PASSWORD: testing

    testInputs: 'true'  # if 'true' test wrong inputs
---
- launchApp

# Assert navigation bar
- assertVisible:
    id: "com.kptncook.app.kptncook:id/profileDashboardFragment"

# Navigate to profile tab
- tapOn:
    id: "com.kptncook.app.kptncook:id/profileDashboardFragment"
# 
# alternativ 1 (Spanish)
# - tapOn:
#     text: "Perfil"
#     index: 1
#
# alternativ 2
# - tapOn:
#     point: "90%,95%" (Pixel 4a)(currently y <= 90% can't be tapped)(doesn't work)


# Assert profile tab by its header text 
- assertVisible:
    id: "com.kptncook.app.kptncook:id/niceTextView5"

# Press email signup button
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnEmailSignup"

# Focus text field for first name
- tapOn:
    id: "com.kptncook.app.kptncook:id/etFirstName"

# Fill first name
- inputText: ${FIRSTNAME}

# Focus text field for last name
- tapOn:
    id: "com.kptncook.app.kptncook:id/etLastName"

# Fill last name
- inputText: ${LASTNAME}

# Tap on continue button
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnContinue"

# If true test bad Inputs
- runFlow:
    when:
      true: ${testInputs == 'true'}
    file: inputs/badEmail.yaml

# Focus text field for email
- tapOn:
    id: "com.kptncook.app.kptncook:id/etEmail"
- eraseText

# Fill email field
- inputText: ${EMAIL}

# Tap on continue button
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnContinue"

# If true test bad Inputs
- runFlow:
    when:
      true: ${testInputs == 'true'}
    file: inputs/badPassword.yaml

# Focus text field for password
- tapOn:
    id: "com.kptncook.app.kptncook:id/etPassword"

# Clear field before writing
- eraseText

# Fill password field
- inputText: ${PASSWORD}

# Tap on continue button
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnContinue"

# Assert age disclaimer by image
- assertVisible:
    id: "com.kptncook.app.kptncook:id/ivInfo"

# Tap on yes
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnOk"
#
# altenativ 1 (Spanish)
# - tapOn: "SÍ"
#
# alternativ 2 (Pixel 4a)
# - tapOn:
#     point: "70%,64%"

# Skip image
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnSkip"
#
# alternativ 1 (Spanish)
# - tapOn: "SALTAR"
#
# alternativ 2 (Pixel 4a)
# - tapOn:
#     point: "27%,90%" (currently y <= 90% can't be tapped)

# Assert email confirmation notification
- assertVisible:
    id: "com.kptncook.app.kptncook:id/title_template"
#
# alternativ 1 (Spanish)
# - assertVisible: "¡Revisa tu bandeja de entrada!"

# Tap on send-email-again button
- tapOn:
    id: "android:id/button2"
#
# alternativ 1 (Spanish)
# - tapOn: "ENVIAR EMAIL NUEVAMENTE"
#
# alternativ 2 (Pixel 4a)
# - tapOn:
#     point: "50%,62%"

# Assert registraton is finished by navbar layout element
- extendedWaitUntil:
    visible: "com.kptncook.app.kptncook:id/tabLayout"
    timeout: 15000 

# Assert new account by cooked-counter "0"
- assertVisible:
    id: "com.kptncook.app.kptncook:id/tvCookedCount"
    text: "0"

- stopApp

