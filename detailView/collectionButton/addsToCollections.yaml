appId: com.kptncook.app.kptncook
---
- launchApp

# Navigate into the flipper
- tapOn:
    id: "com.kptncook.app.kptncook:id/flipperTabFragment"

# Save the recipe title 
- copyTextFrom:
    id: "com.kptncook.app.kptncook:id/fragment_recipe_tv_description"
- evalScript: ${output.recipeTitle = maestro.copiedText}

# Navigate into a recipe from the flipper
- tapOn:
    id: "com.kptncook.app.kptncook:id/fragment_recipe_iv_cover"

# # Use the collections button
- tapOn:
    id: "com.kptncook.app.kptncook:id/action_add_list"

# Add recipe to 'Cooked' collection
- tapOn:
    id: "com.kptncook.app.kptncook:id/image"
    index: 0

# Use the collections button
- tapOn:
    id: "com.kptncook.app.kptncook:id/action_add_list"

# Add recipe to the first custom collection
- tapOn:
    id: "com.kptncook.app.kptncook:id/image"
    index: 2

# Navigate into favorites tab
- tapOn:
    id: "com.kptncook.app.kptncook:id/favoriteFragment"

# Open 'Cooked' collection
- tapOn:
    id: "com.kptncook.app.kptncook:id/image"
    index: 0

# Copy the title of the first recipe inside the collection 
- copyTextFrom:
    id: "com.kptncook.app.kptncook:id/tvTitle"
    index: 0    # 'Cooked' is supposed to have just this one recipe

# Compare with the title saved at the start
- assertTrue: ${output.recipeTitle == maestro.copiedText}

# Leave 'Cooked'
- tapOn:
    point: "7%,9%"
#- tapOn: "Navigate up"#


# Open the first custom collection
- tapOn:
    id: "com.kptncook.app.kptncook:id/image"
    index: 2

# Copy the title of the first recipe inside the collection 
- copyTextFrom:
    id: "com.kptncook.app.kptncook:id/tvTitle"
    index: 0    # custom is supposed to have just this one recipe

# Compare with the title saved at the start
- assertTrue: ${output.recipeTitle == maestro.copiedText}