appId: com.kptncook.app.kptncook
env:
  EMAIL: vincent+testui+detailView@kptncook.com
  PASSWORD: testing
# This flow tests correct behaviour of collection button when logged into an account
---
# Setup
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/navbar/assertions/navbarIsVisible.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/navbar/actions/tapFlipperTab.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/flipper/actions/saveRecipeTitle.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/flipper/actions/tapRecipe.yaml

# Add recipe
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/detailView/actions/collectionsButton/tapCollectionButton.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/detailView/actions/collectionsButton/collectionMenu/addToNewCollection.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/detailView/actions/collectionsButton/collectionMenu/createNewCollection.yaml
    env:
      COLLECTION_NAME: "Custom"
- runFlow:
      file: /Users/vincentketteniss/UITests-KC/detailView/actions/collectionsButton/collectionMenu/closeMenu.yaml

# Check if recipe has been added
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/navbar/actions/tapFavoritesTab.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/favorites/actions/collection/tapCollection.yaml
    env:
      INDEX: 2
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/collections/asserts/savedRecipeTitle/isEqual.yaml
    env:
      INDEX: 0

# Delete collection
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/collections/actions/tapMenu.yaml
- runFlow:
    file:  /Users/vincentketteniss/UITests-KC/collections/actions/menu/tapDelete.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/collections/actions/menu/confirm.yaml
- runFlow:
    file: /Users/vincentketteniss/UITests-KC/collections/asserts/collection/isNotVisible.yaml
    env:
      COLLECTION_NAME: "Custom"

