appId: com.kptncook.app.kptncook
---
- launchApp

# # Navigate into the flipper
# - tapOn:
#     id: "com.kptncook.app.kptncook:id/flipperTabFragment"

# Save the recipe title 
- copyTextFrom:
    id: "com.kptncook.app.kptncook:id/fragment_recipe_tv_description"
- evalScript: ${output.recipeTitle = maestro.copiedText}

# Navigate into a recipe from the flipper
- tapOn:
    id: "com.kptncook.app.kptncook:id/fragment_recipe_iv_cover"

# Use the meal planner button
- tapOn:
    id: "com.kptncook.app.kptncook:id/btnMealplann"

# Choose a date
# - tapOn: "11"

# Save recipe to meal planner
- tapOn:
    id: "android:id/button1"

# Go into planning tab
- tapOn:
    id: "com.kptncook.app.kptncook:id/planningTabFragment"

# Go into meal planner tab
- tapOn:
    id: "com.kptncook.app.kptncook:id/text"
    index: 0

# Get title from recipe
- copyTextFrom:
    id: "com.kptncook.app.kptncook:id/tvTitle"
    index: 5    # index has to be set manually according to weekday

# Compare with the title saved at the start
- assertTrue: ${output.recipeTitle == maestro.copiedText}

# TODO: 1. find a way to set meal planner recipe index dynamically